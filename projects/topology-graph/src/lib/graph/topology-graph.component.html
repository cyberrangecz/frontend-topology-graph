<mat-card class="topology-view">
    <crczp-topology-app-legend class="topology__view-legend"
                               [style.float]="'left'"
                               [legendAttachment]="'vertical'"
                               [showContainers]="showLegendContainers"
    />
    <div #topologyContent class="topology-view__topology-content">
        @if (isError) {
            <div class="error-message">
                <h3>Could not load topology data.</h3>
                <div class="try-again">
                    <button mat-button color="primary" (click)="reloadTopology()">Try again</button>
                </div>
            </div>
        } @else if (isLoading$ | async) {
            <div class="loading-wrapper">
                <crczp-logo-spinner />
                <h3 class="loading-text">Loading topology...</h3>
            </div>
        }
        <!--GRAPH-->
        <crczp-graph class="topology-content__graph" *ngIf="dataLoaded"
                     [cloudSandboxInstance]="isCloudSandboxInstance()"
                     [isConsoleReady]="isConsoleReady$ | async"
                     [draggedNode]="draggedNode"
                     [height]="getTopologyHeight()"
                     [width]="getTopologyWidth()"
                     [nodes]="nodes"
                     [links]="links"
                     (polling)="onPollingStateChange($event)"
                     (loadConsoles)="onLoadConsoles($event)"
                     (showContainers)="onShowContainers($event)">
        </crczp-graph>
    </div>
</mat-card>

<!-- EXAMPLE LEGEND HORIZONTAL BOTTOM -->
<!--
<crczp-topology-app-legend [width]="800"
                           [height]="65"
                           [legendAttachment]="'horizontal'"
></crczp-topology-app-legend>
-->
